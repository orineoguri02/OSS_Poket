# 사이트 최적화 가이드

## CDN 제거 및 로컬 파일 사용

CDN 용량 제한으로 인해 Vercel Blob Storage를 사용하지 않고, 로컬 파일만 사용하도록 변경했습니다.

## 변경 사항

### 1. API 변경

- `api/pokemon/index.js`: CDN URL 반환 로직 제거, 항상 로컬 경로만 반환
- `src/utils/helpers.js`: CDN URL 체크 제거, 로컬 경로만 사용

### 2. 빌드 최적화

- `vite.config.js`: 코드 스플리팅 및 청크 최적화 추가
  - Three.js 관련 라이브러리 별도 청크로 분리
  - React 관련 라이브러리 별도 청크로 분리
  - 소스맵 생성 비활성화 (프로덕션 빌드 크기 감소)

### 3. 빌드 스크립트 변경

- `scripts/prebuild.js`: CDN 관련 로직 제거, 항상 로컬 파일 포함
- `scripts/postbuild.js`: 복원 로직 제거 (불필요)

### 4. 모델 로더 변경

- `src/models/ModelLoader.jsx`: CDN URL 처리 로직 제거, 로컬 경로만 처리

## 최적화 방법

### 1. 코드 스플리팅

- Three.js 관련 라이브러리를 별도 청크로 분리하여 초기 로딩 시간 단축
- React 관련 라이브러리를 별도 청크로 분리

### 2. 빌드 압축

- `esbuild`를 사용한 빠른 압축
- 소스맵 생성 비활성화로 빌드 크기 감소

### 3. 정적 파일 최적화

- 3D 모델 파일(.dae, .fbx, .obj, .glb, .gltf)을 정적 파일로 처리
- Vite의 기본 최적화 적용

## 주의사항

1. **빌드 크기**: `public/pokemon` 폴더가 빌드에 포함되므로 배포 패키지 크기가 증가합니다.
2. **로딩 시간**: 모든 모델 파일이 로컬에 있어야 하므로, 필요한 포켓몬만 포함하는 것을 권장합니다.
3. **캐싱**: 브라우저 캐싱을 활용하여 재방문 시 로딩 시간을 단축할 수 있습니다.

## 추가 최적화 권장사항

1. **이미지 압축**: 텍스처 파일(.png)을 압축하여 크기 감소
2. **Lazy Loading**: 포켓몬 모델을 필요할 때만 로드
3. **모델 최적화**: 불필요한 포켓몬 모델 제거 또는 압축
